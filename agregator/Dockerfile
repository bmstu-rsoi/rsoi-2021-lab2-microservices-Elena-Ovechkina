#  Основа проекта
FROM node:14.17
#  Указываем текущую рабочую директорию на виртуальной машине
WORKDIR /home/project/lab1
#  Копирование данных о зависимостях проекта
COPY ./package.json ./package.json
#  Запуск команды для установки библиотек
RUN npm install --only=prod
#  Копируем проект в директорию
COPY . .
#  Откроем порт для нашего приложения
EXPOSE 3000
#  Установка среды для боевого сервера
ENV NODE_ENV production
#  Запуск приложения
CMD ["npm", "start"]